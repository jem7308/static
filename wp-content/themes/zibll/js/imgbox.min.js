function imgbox_close(i){$("html,body").css("overflow",""),_i.removeClass("show click-show"),void 0!==i&&i.find("img,.swiper-zoom-container").css({transform:""})}function imgbox_touch(){_i.find(".swiper-slide").minitouch({direction:"bottom",selector:".swiper-close.no-scale",depreciation:100,onStart:!1,onEnd:function(i){imgbox_close(i)}})}function imgbox_open(i){tbquire(["swiper"],function(){var s=$(i),e=0,o="";s.each(function(){e+=1,$(this).attr("imgbox-index",e),o+=get_slide($(this))}),wrapper='<div class="swiper-wrapper">'+o+"</div>",swiper='<div class="swiper-imgbox slider-imgbox">'+wrapper+'<div class="swiper-pagination"></div><div class="swiper-button-prev"></div><div class="swiper-button-next"></div></div>',_i.append(swiper);var a=new Swiper(".slider-imgbox",{init:!1,autoplay:!1,grabCursor:!0,speed:800,lazy:{loadPrevNext:!0},navigation:{nextEl:".slider-imgbox .swiper-button-next",prevEl:".slider-imgbox .swiper-button-prev"},pagination:{el:".slider-imgbox .swiper-pagination",clickable:!0},zoom:{maxRatio:2},keyboard:{enabled:!0,onlyInViewport:!1},spaceBetween:20,on:{init:function(){imgbox_touch()},zoomChange:function(i,s,e){i>1?_i.find(".swiper-close").removeClass("no-scale"):_i.find(".swiper-close").addClass("no-scale")}}});_win.bd.on("click",i,function(){return $(".swiper-imgbox").css("display",""),inx=$(this).attr("imgbox-index"),$("html,body").css("overflow","hidden"),$(".modal").modal("hide"),a.init(),a.slideToLoop(inx-1,10),_i.addClass("show"),!1}),_win.bd.click(".imgbox-an .icon-play",function(){a.autoplay.start()}),_i.on("touchmove pointermove MSPointerMove",function(i){i.preventDefault()})})}function get_slide(i){var s=i.attr("href")||i.attr("src")||i.find("img").attr("src"),e=s.replace(/(.*\/)(.*)(-\d+x\d+)(.*)/g,"$1$2$4");return e=e.replace(/\??x-oss-process(.*)/,""),'<div class="swiper-slide"><div class="swiper-close no-scale"><div class="swiper-zoom-container"><div class="absolute img-close"></div><img data-src="'+e+'" class="swiper-lazy lazyload"><div class="swiper-lazy-preloader"></div></div></div></div>'}function click_imgbox(i){var s='<div class="swiper-wrapper"><div class="swiper-slide"><div class="swiper-close no-scale"><div class="swiper-zoom-container"><div class="click-img"></div><div class="absolute img-close"></div></div></div></div></div>',e='<div class="click-imgbox swiper-imgbox">'+s+"</div>";_i.find(".click-img").length||_i.append(e),_win.bd.on("click",i,function(){var i=$(this),s=i.parent('a[data-imgbox="imgbox"]');if(!s.length){var e=i.attr("href")||i.attr("src")||i.find("img").attr("src"),o=e.replace(/(.*\/)(.*)(-\d+x\d+)(.*)/g,"$1$2$4");o=o.replace(/\??x-oss-process(.*)/,"");var a='<img data-src="'+o+'" class="lazyload">',n=_i.find(".click-img>img");return n.length?n.attr("src")!=o&&n.prop("outerHTML",a):_i.find(".click-img").html(a+'<div class="swiper-lazy-preloader"></div>'),_i.delay(500).addClass("show click-show"),imgbox_touch(),$("html,body").css("overflow","hidden"),!1}})}$("link#swiper").length||$("head").append('<link type="text/css" id="swiper" rel="stylesheet" href="'+_win.uri+'/css/swiper.min.css">');var _close="";_close+='<i class="icon-close"><i data-svg="close" data-class="ic-close" data-viewbox="0 0 1024 1024"></i></i>',beijin='<div class="modal-backdrop imgbox-bg"></div>',anniu='<div class="imgbox-an">'+_close+"</div>",imgbox='<div class="imgbox">'+beijin+anniu+"</div>",_win.bd.append(imgbox);var _i=$(".imgbox"),_img=_i.find(".swiper-slide img");_win.bd.on("click",".img-close,.imgbox-bg,.imgbox-an .icon-close",function(){imgbox_close()}),imgbox_open('a[data-imgbox="imgbox"]'),click_imgbox(".comt-main .box-img"),click_imgbox(".wp-posts-content img"),auto_fun();