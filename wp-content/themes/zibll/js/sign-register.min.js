function draw(a,t){var n=$("#"+a).attr("width"),i=$("#"+a).attr("height"),o=document.getElementById(a),r=o.getContext("2d");o.width=n,o.height=i;for(var e="A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0",c=e.split(","),s=c.length,h=0;h<=3;h++){var d=Math.floor(Math.random()*s),l=30*Math.random()*Math.PI/180,m=c[d];t[h]=m.toLowerCase();var f=10+20*h,_=20+8*Math.random();r.font="bold 23px 微软雅黑",r.translate(f,_),r.rotate(l),r.fillStyle=randomColor(),r.fillText(m,0,0),r.rotate(-l),r.translate(-f,-_)}for(h=0;h<=5;h++)r.strokeStyle=randomColor(),r.beginPath(),r.moveTo(Math.random()*n,Math.random()*i),r.lineTo(Math.random()*n,Math.random()*i),r.stroke();for(h=0;h<=30;h++){r.strokeStyle=randomColor(),r.beginPath();f=Math.random()*n,_=Math.random()*i;r.moveTo(f,_),r.lineTo(f+1,_+1),r.stroke()}}function randomColor(){return"rgb("+Math.floor(230*Math.random()+20)+","+Math.floor(190*Math.random()+30)+","+Math.floor(190*Math.random()+30)+")"}function ajax_signsubmit(a){zib_ajax(a,0,function(a){a.error||location.reload(),$(".slidercaptcha-back").click()})}$(".slidercaptcha").length&&tbquire(["slidercaptcha"]),$("[canvas-code]").length&&(_win.canvas_code={},$("[canvas-code]").each(function(){var a=$(this),t=a.attr("id");_win.canvas_code[t]=[],draw(t,_win.canvas_code[t])}),_win.bd.on("click","[canvas-code]",function(){var a=$(this),t=a.attr("id");_win.canvas_code[t]=[],draw(t,_win.canvas_code[t])}),_win.bd.on("input porpertychange",'input[name="canvas_yz"]',function(){var a=$(this),t=a.attr("canvas-id"),n=a.val().toLowerCase(),i=a.siblings(".match-ok");if(n.length>3){var o=_win.canvas_code[t].join("");i.addClass("show"),n==o?i.html('<i class="fa fa-check"></i>'):i.html('<i class="fa fa-times c-red"></i>')}else i.removeClass("show")})),$(".sign form").keydown(function(a){a=a||event;var t=a.which||a.keyCode;13==t&&$(this).find(".signsubmit-loader").trigger("click")}),_win.bd.on("input porpertychange","input[change-show]",function(){var a=$(this),t=a.val();if(t.length>5){var n=a.attr("change-show")||".change-show";a.parents("form").find(n).slideDown()}}),_win.bd.on("click",".captchsubmit",function(){_this=$(this);var a=_this.html(),t=60,n=function(){zib_ajax(_this,0,function(a){a.error||i(),$(".slidercaptcha-back").click()})},i=function(){var n=$(".captchsubmit");t>0?(n.html(t+"秒后可重新发送").attr("disabled",!0),t--,setTimeout(i,1e3)):(n.html(a).attr("disabled",!1),t=60)};$(".slidercaptcha").length&&!_win.slidercaptcha?ajax_slidercaptcha(function(){n()},_this):n()}),_win.bd.on("click",".signsubmit-loader",function(){_this=$(this),$(".slidercaptcha").length&&!_win.slidercaptcha?ajax_slidercaptcha(function(a){ajax_signsubmit(_this)},_this):ajax_signsubmit(_this)});