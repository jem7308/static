(function(t,i,o,r){jQuery(o).ready(function(t){function r(n,t,i,o,r){var e,s,c;o&&(t+="px",i+="px",e="translate3D("+t+","+i+" , 0)",s={},c=a(),s[c+"transform"]=e,s[c+"transition"]=c+"transform 0s linear",s.cursor=r,"null"==o&&(s[c+"transform"]="",s[c+"transition"]=""),n.css(s))}function a(){var n=o.body||o.documentElement;return n=n.style,""==n.WebkitTransition?"-webkit-":""==n.MozTransition?"-moz-":""==n.OTransition?"-o-":""==n.transition?"":void 0}function e(n,i,o,r,a){var e=n.parents(".ajax-form"),s=e.find(".ajax-notice"),c=n.html(),d=e.attr("ajax-url"),l='<i class="fa fa-spinner fa-spin fa-fw"></i> ',u="warning",f=l+"正在处理，请稍候...";n.attr("disabled",!0).html(l+"请稍候..."),r&&(s.html('<div style="padding: 10px;margin: 0;" class="notice"></div>'),r=l+r),s.find(".notice").html(r||f).removeClass("notice-error notice-info").addClass("notice-warning"),t.ajax({type:"POST",url:d,data:i,dataType:"json",error:function(t){n_con='<div style="padding: 10px;margin: 0;" class="notice notice-error"><b>网络异常或者操作失败，请稍候再试！ '+t.status+"|"+t.statusText+"</b></div>",s.html(n_con),n.attr("disabled",!1).removeClass("jb-blue").html("操作失败"),e.find(".progress").css("opacity",0).find(".progress-bar").css({width:"0",transition:"width .3s"})},success:function(r){r.msg&&(u=r.error_type||(r.error?"error":"info"),n_con='<div style="padding: 10px;margin: 0;" class="notice notice-'+u+'"><b>'+r.msg+"</b></div>",s.html(n_con)),n.attr("disabled",!1).html(r.button||c),r.reload&&setTimeout(function(){location.reload()},1e3),t.isFunction(o)&&o(r,n,i)}})}t.fn.minitouch=function(n){n=t.extend({direction:"bottom",selector:"",depreciation:50,onStart:!1,onEnd:!1},n);var i=t(this),o=(t("body"),n.depreciation),a=0,e=0,s=0,c=0,d=0,l=0,u=0,f=!1;i.on("touchstart pointerdown MSPointerDown",n.selector,function(n){a=0,e=0,s=0,c=0,d=0,l=0,u=0,a=n.originalEvent.pageX||n.originalEvent.touches[0].pageX,e=n.originalEvent.pageY||n.originalEvent.touches[0].pageY,f=!0}).on("touchmove pointermove MSPointerMove",n.selector,function(i){s=i.originalEvent.pageX||i.originalEvent.touches[0].pageX,c=i.originalEvent.pageY||i.originalEvent.touches[0].pageY,l=s-a,u=c-e,d=180*Math.atan2(u,l)/Math.PI,"right"==n.direction&&(u=0,l=d>-40&&d<40&&l>0?l:0),"left"==n.direction&&(u=0,l=(d>150||d<-150)&&0>l?l:0),"top"==n.direction&&(l=0,u=d>-130&&d<-50&&0>u?u:0),"bottom"==n.direction&&(l=0,u=d>50&&d<130&&u>0?u:0),0===l&&0===u||(i.preventDefault(),r(t(this),l,u,f,"grab"))}).on("touchend touchcancel pointerup MSPointerUp",n.selector,function(p){(Math.abs(l)>o||Math.abs(u)>o)&&0!=n.onEnd&&n.onEnd(i),r(t(this),0,0,"null",""),f=!1,a=0,e=0,s=0,c=0,d=0,l=0,u=0})},t("body").on("click",".online-update",function(){var n={},i=t(this),o=i.parents(".ajax-form").find(".progress");if(i.attr("disabled"))return!1;n.action="zibll_online_update",e(i,n,function(n){r(n)},"正在获取更新文件，请稍候...");var r=function(t){t.error?(i.attr("disabled",!1).html('<i class="fa fa-cloud-download fa-fw"></i> 在线更新').siblings(".ajax-submit").fadeIn(150),o.css("opacity",0).find(".progress-bar").css({width:"0",transition:"width .3s"})):(t.action&&(n=t,e(i,n,function(n){r(n)},t.msg)),t.progress&&(i.attr("disabled",!0).siblings(".ajax-submit").fadeOut(150),o.css("opacity",1),o.find(".progress-bar").css({width:t.progress+"%",transition:"width .5s"})),t.progress_end&&t.progress_time&&setTimeout(function(){o.find(".progress-bar").css({width:t.progress_end+"%",transition:"width "+t.progress_time+"s"})},500))}}),t("body").on("click",".ajax-submit",function(){var i={},o=t(this),r=o.parents(".ajax-form");if(o.attr("disabled"))return!1;r.find("input").each(function(){n=t(this).attr("ajax-name"),v=t(this).val(),n&&(i[n]=v)});var a="authorization_submit"==o.attr("id");return e(o,i,function(n){n.error&&a&&(_tt="开启正版授权",r.find(".hide-box").slideDown(300))})}),t(i).on("scroll resize",function(){var n=o.documentElement.scrollTop+o.body.scrollTop,i=t(".csf-container");n>300?i.addClass("sticky-sm"):i.removeClass("sticky-sm")});var s=t(i).width();t(o).on("click",".csf-menu",function(n){t(".csf-nav-options").toggleClass("show")}),s<783&&t(".csf-nav-options").minitouch({direction:"right",onEnd:function(n){n.removeClass("show")}})})})(jQuery,window,document);